<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Login</title>
    <script>
      window.$ = window.jQuery = require("jquery");
    </script>
    <script>
      const { ipcRenderer } = require('electron'); 
      $( document ).ready(() => {

        $("#usernameId").focus();

        $("#minimize").click(() => ipcRenderer.send('request-login-minimize'));
        $("#exit").click(() => window.close());

        const Login = () => {

          if($("#usernameId").val().toString().length > 4 && $("#passwordId").val().toString().length > 4)
            require('./query').loginFunc($("#usernameId").val(), $("#passwordId").val());
          else
            ipcRenderer.send('request-req-not-met-action');

          $("#usernameId").val("");
          $("#passwordId").val("");

        }

        $( "#loginButton" ).click(() => Login());
        $( "#passwordId" ).keypress(event => event.keyCode == 13 ? Login() : null);
        $( "#noAcc" ).click(() => ipcRenderer.send('request-registration-action'));

      });
    </script>
    <link rel="stylesheet" type="text/css" href="./css/loginStyle.css">
  </head>
  <body>
    <div id="topdiv"> 
        <div style="-webkit-app-region: drag;" class="col"></div>
        <div style="-webkit-app-region: drag;" class="col"></div>
        <div style="-webkit-app-region: drag;" class="col"></div>
        <div style="-webkit-app-region: drag;" class="col"></div>
        <div class="col">
          <button id="minimize"></button>
          <button id="exit"></button>
        </div>
    </div>
    <div class="divTable" id="placeHolder" align="middle">
      <div class="divTableBody">
          <div class="divTableRow"></div>
          <div class="divTableRow">
            <div class="divTableCell">
              <input id="usernameId" type="text" placeholder="Username">
            </div>
          </div>
          <div style="margin-top: 55px;" class="divTableRow">
            <div class="divTableCell">
              <input id="passwordId" type="password" placeholder="Password">
            </div>
          </div>
          <div class="divTableRow">
            <div class="divTableCell">
              <button id="loginButton"><b>Log in</b></button>
            </div>
          </div>
          <div class="divTableRow">
            <div class="divTableCell">
              <button id="noAcc"><b>Create <br> Account</b></button>
            </div>
          </div>
      </div>
    </div>
  </body>
</html>
