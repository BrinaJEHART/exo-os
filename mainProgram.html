<html>
    <head>
        <title>eXo</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="./css/mainpStyle.css">
        <script>
            window.$ = window.jQuery = require("jquery");
        </script>
        <script>
            const { ipcRenderer } = require('electron'); 
            const worldClock = () => {
                let time = new Date();
                const timeFix = (x) => {
                    return parseInt(x) < 10 ?  `0${x}` : x;
                }
                $("#clock").text(`${timeFix(time.getHours())}:${timeFix(time.getMinutes())}`);  
                setTimeout(worldClock, 60000);
            }
            $( document ).ready(() => {
                worldClock();
                $("#minimize").click(() => {
                    
                });
                $(".roundBtn").click((e) => {
                    switch(String(e.target.id)){
                        case "exit":
                            window.close();
                            break;
                        case "minimize":
                            ipcRenderer.send('request-mainwindow-minimize');
                            break;
                        case "reset":
                            self.location.assign(location);
                            break;
                        case "back":
                            if(!$("#platformDiv").is(":visible"))break;
                            $(".platformWindow").fadeOut(200);                            
                            break;
                        default:
                            ipcRenderer.send('request-failed-to-generate-action');
                            break;
                    }
                });
                $( ".dropbtn" ).click(() => {
                    $( "#mainDiv" ).children().hide();
                    $( "#platformDiv" ).fadeIn();
                });
                $(".data").click((e) => {
                    $( "#mainDiv" ).children().hide();
                    switch(parseInt(e.target.id)){
                        case 1:
                            $( "#accInfoDiv" ).fadeIn();
                            break;
                        case 2: 
                            $( "#tutorialDiv" ).fadeIn();
                            break;
                        case 3:
                            ipcRenderer.send('request-mainwindow-logOut');
                            break;
                        default:
                            ipcRenderer.send('request-failed-to-generate-action');
                            break;
                    }
                });
                $("input#save").click(() => {
                   //history.go(0);
                });
                setTimeout(() => {
                  $( "body" ).fadeIn(1500);  
                }, 1000)
            });
        </script>
    </head>
    <body> 
        <div>
            <div class="dropdown">
              <button class="dropbtn">eXo</button>
              <div class="dropdown-content">
                <a id="1" class="data">Account</a>
                <a id="2" class="data">Tutorial</a>
                <a id="3" class="data">Logout</a>
              </div>
            </div>   
            <div id="clock"></div>     
            <button class="roundBtn" id="back"></button>
            <button class="roundBtn" id="reset"></button>  
            <button class="roundBtn" id="minimize"></button>
            <button class="roundBtn" id="exit"></button>
        </div>
        <div id="mainDiv" class="bodyDiv">
            <figure id="welcText">
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
                <h1>Welcome<br>to Exo!</h1>
            </figure>
            <div id="platformDiv" style="display:none">
                <div id="buttonsDiv">
                    <div class="dragg"><input type="button" value="Notes"></div><br>
                    <div class="dragg"><input type="button" value="Store"></div><br>
                    <div class="dragg"><input type="button" value="Library"></div><br>
                    <div class="dragg"><input type="button" value="Calculator"></div>
                    <div class="platformWindow">
                        
                    </div>
                </div>
            </div>
            <div id="accInfoDiv" style="display:none">
                <div id="labels">
                    <div>Username:</div><br>
                    <div>Member since:</div><br>
                    <div>Last seen:</div><br>
                    <div>Account age:</div><br>
                    <div><input id="save" type="button" value="Save"></div>
                </div>
                <div id="accData">
                    <div><input type=text value="username"></div><br>
                    <div>1</div><br>
                    <div>2</div><br>
                    <div>3</div>
                </div>
            </div> 
            <div id="tutorialDiv" style="display:none">
                <p>welcome to the tutorial</p>
            </div>
    </body>
</html>
