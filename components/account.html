<div id="account-info-div-content" style="display: none; overflow: scroll;">
    <div id="labels">
        <div>Username:</div><br>
        <div>Member since:</div><br>
        <div>Last seen:</div><br>
        <div>Account age:</div><br>
        <div><input id="save" type="button" value="Save"></div>
    </div>
    <div id="accData">
        <div><input id="username" type=text value=""></div><br>
        <div><span id="member_since"></span></div><br>
        <div><span id="last_seen"></span></div><br>
        <div><span id="age"></span></div>
    </div>
    <hr>
    <div id="ui_icons_set">
        <input type="checkbox" value="Games">Games<br>
        <input type="checkbox" value="Games">Games<br>
        <input type="checkbox" value="Games">Games<br>
        <input type="checkbox" value="Games">Games<br>
    </div>
    <script>
        $(document).ready(() => {
            let userData = null;
            $('#ui_icons_set').html();
            resetValues();
            function retriveUserPromise() {
                //console.log("getting data");
                userData = getUser();
                setTimeout(() => {
                    if (!userData)
                        retriveUserPromise();
                    else {
                        //console.log(JSON.parse(userData.settings));
                        let date_created = format_date(userData.date_c)
                        $("#username").val(String(userData.name));
                        $("#member_since").text(date_created);
                        $("#last_seen").text(format_date(userData.date_l));
                        $("#age").text(
                            `${Math.floor(Math.abs(moment.duration(moment(new Date()).diff(date_created)).asDays()))} days`
                        );
                        /*for (let key, value in JSON.parse(userData.settings))
                            $('#ui_icons_set').append(`
                                <input type="checkbox" value="${key}">${key}<br>
                            `);*/

                        setTimeout(() => $('#account-info-div-content').fadeIn(100), 10);
                    }
                }, 300);
            } (retriveUserPromise)();

            const updateUser = () => {
                if ($("#username").val() != userData.name && $("#username").val().length > 4) {
                    userData.name = $("#username").val();
                    setUsername(userData) ? $("#username").css({ background: "transparent" }) : null;
                }
            }

            window.format_date = _date_ => new Date(_date_).toLocaleDateString("en-US");

            $('#username').on('input', () =>
                $("#username").val() != userData.name ?
                    $("#username").css({ background: "linear-gradient(to bottom, rgba(0,0,0,0), rgba(200,0,0, 0.4))" }) :
                    $("#username").css({ background: "transparent" })
            );

            $('#username').keypress(event => event.keyCode == 13 ? updateUser() : null);
            $('input#save').click(() => updateUser());
        });
    </script>
</div>