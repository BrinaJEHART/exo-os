<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="./css/regStyle.css">
    <meta charset="UTF-8">
    <title>Register</title>
    <script>
      window.$ = window.jQuery = require("jquery");
    </script>
    <script>
      const { ipcRenderer } = require('electron');
      $( document ).ready(() => {
        $("#usernameId").focus();
        $("#minimize").click(() => {
          ipcRenderer.send('request-register-minimize');
        });
        $("#exit").click(() => {
          window.close();
        });
        const CreateAccount = () => {
          if($("#usernameId").val().toString().length > 4 
            && $("#passwordId").val().toString().length > 4 
            && $("#reEnterPasw").val().toString().length > 4){
              if($("#passwordId").val().toString() == $("#reEnterPasw").val().toString()){
                require('./query').reqFunc($("#usernameId").val(), $("#passwordId").val());
              }else{
                ipcRenderer.send('request-pasw-dont-match-action');
              }
          }else{
            ipcRenderer.send('request-req-not-met-action');
          }
          $("#usernameId").val("");
          $("#passwordId").val("");
          $("#reEnterPasw").val("");
        }
        $( "#registerButton" ).click(() => {
          CreateAccount();
        });
        $( "#reEnterPasw" ).keypress(e => {
          if(e.keyCode == 13)CreateAccount();
        });
      });
    </script>
  </head>
  <body>
    <div id="topdiv"> 
      <div style="-webkit-app-region: drag;" class="col"></div>
      <div style="-webkit-app-region: drag;" class="col"></div>
      <div style="-webkit-app-region: drag;" class="col"></div>
      <div style="-webkit-app-region: drag;" class="col"></div>
      <div class="col">
        <button id="minimize"></button>
        <button id="exit"></button>
      </div>
    </div>
    <div align="middle" class="divTable">
      <div class="divTableBody">
          <div class="divTableRow"></div>
        <div class="divTableRow">
          <div class="divTableCell">
            <input id="usernameId" type="text" placeholder="Username">
          </div>
        </div>
        <div class="divTableRow">
          <div class="divTableCell">
            <input id="passwordId" type="password" placeholder="Password">
          </div>
        </div>
        <div class="divTableRow">
          <div class="divTableCell">
            <input id="reEnterPasw" type="password" placeholder="Re-enter password">
          </div>
        </div>
        <div class="divTableRow">
          <div class="divTableCell">
            <button id="registerButton"><b>Register</b></button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
